swagger: '2.0'
info:
  title: 'Coding Session Stream API'
  description: 'Information about the duration of coding sessions generated by the Manual Mailpiece Coding or the Video Mailpiece Coding application.'
  contact:
    name: erkennen.codieren.pakete@post.ch
  version: 1.0.0-feature-version-v1.1
host: 'server:8080'
basePath: Kafka
paths:
  logistics.coding.session.Session-event:
    x-data:
      confidentiality: C2
      classification: P1
    x-topic-configuration:
      retention.ms: 15552000000
    get:
      summary: 'Duration of coding sessions'
      description: 'Whenever a coder stops a coding session (i.e. logs out of the client / changes the coding mode) an event that contains information about the producer and the start/end time is generated.'
      tags:
        - logistics.coding.session
      responses:
        '200':
          description: 'The event which occured'
          schema: {type: array, $ref: 'CodedSessionEvents'}
definitions:
  DateTime:
    type: string
    description: "<a href=\"https://swagger.io/docs/specification/data-models/data-types/#string\">String @format date-time</a>,\nas defined by <a href=\"https://tools.ietf.org/html/rfc3339#section-5.6\">RFC 3339, section 5.6</a>,\nfor example: <code>2014-05-22T10:42:42.542+00:00</code>."
    format: date-time
  Int:
    type: integer
    description: '<a href="https://swagger.io/docs/specification/data-models/data-types/#numbers">Number @asType integer</a>'
  CodedSessionEvents:
    type: object
    properties:
      eventId:
        type: string
        description: "Unique identifier of a coding message.\nPrimary key ðŸ”‘"
        maxLength: 200
      timestamp:
        $ref: 'DateTime'
        description: 'Time when the event is published.'
      videoSession:
        $ref: 'VideoSessionEvent'
        description: 'Coding session generated by the Video Mailpiece Coding (VMC) application'
      manualSession:
        $ref: 'ManualSessionEvent'
        description: 'Coding session generated by the Manual Mailpiece Coding (MMC) application'
    required:
      - eventId
      - timestamp
    additionalProperties: false
  ManualSessionEventProducer:
    type: string
    enum:
      - MANUAL_CODING_REJECT
      - MANUAL_CODING_BULK
      - MANUAL_SORTING_BULK_SCANNING
      - MANUAL_SORTING
    description: "MANUAL_CODING_REJECT             Component where a coder manually captures barcodes and enters address information.\nMANUAL_CODING_BULK               Component where barcodes, weight, dimensions and address information for bulky goods are captured or entered (manually or partially automated).\nMANUAL_SORTING                   Mailpieces Component where Mailpieces are sorted manually to the correct outlet.\nMANUAL_SORTING_BULK_SCANNING     Component where a coder manually captures barcodes for bulky goods."
  ManualSessionEvent:
    type: object
    properties:
      host:
        type: string
        description: 'Coding client that the coding session was generated on'
      coderId:
        type: string
        description: 'Id of the person that generated the coding session'
      producer:
        $ref: 'ManualSessionEventProducer'
        description: 'Coding mode of the session'
      startTime:
        $ref: 'DateTime'
        description: 'Start time of the coding session'
      endTime:
        $ref: 'DateTime'
        description: 'End time of the coding session'
      totalTime:
        $ref: 'Int'
        description: 'Total time in miliseconds of the coding session'
      codingTime:
        $ref: 'Int'
        description: 'Total time in miliseconds the user was active during a coding session'
      idleTime:
        $ref: 'Int'
        description: 'Total time in miliseconds the user was inactive during a coding session'
    required:
      - host
      - coderId
      - producer
      - startTime
      - endTime
    additionalProperties: false
  VideoSessionEventProducer:
    type: string
    enum:
      - INTERNAL_REGION
      - INTERNAL_POSTCODE
      - INTERNAL_ADDRESS
      - EXTERNAL_REGION
      - EXTERNAL_POSTCODE
      - EXTERNAL_ADDRESS
    description: "INTERNAL_REGION Component VMC CH: Task in the video coding system where the coder detects address region of interest (ROI) elements on an image.\nINTERNAL_POSTCODE Component VMC CH: Task in the video coding system where the coder enters the postcode based on an address region of interest (ROI) image.\nINTERNAL_ADDRESS Component VMC CH: Task in the video coding system where the coder enters the recipient address based on an address region of interest (ROI) image.\nEXTERNAL_REGION Component VMC Offshore: Task in the video coding system where the coder detects address region of interest (ROI) elements on an image.\nEXTERNAL_POSTCODE Component VMC Offshore: Task in the video coding system where the coder enters the postcode based on an address region of interest (ROI) image.\nEXTERNAL_ADDRESS Component VMC Offshore: Task in the video coding system where the coder enters the recipient address based on an address region of interest (ROI) image."
  VideoSessionEvent:
    type: object
    properties:
      coderId:
        type: string
        description: 'Id of the person that generated the coding session'
      producer:
        $ref: 'VideoSessionEventProducer'
        description: 'Coding mode of the session'
      startTime:
        $ref: 'DateTime'
        description: 'Start time of the coding session'
      endTime:
        $ref: 'DateTime'
        description: 'End time of the coding session'
      totalTime:
        $ref: 'Int'
        description: 'Total time in miliseconds of the coding session'
      codingTime:
        $ref: 'Int'
        description: 'Total time in miliseconds the user was active during a coding session'
      idleTime:
        $ref: 'Int'
        description: 'Total time in miliseconds the user was inactive during a coding session'
    required:
      - coderId
      - producer
      - startTime
      - endTime
    additionalProperties: false
